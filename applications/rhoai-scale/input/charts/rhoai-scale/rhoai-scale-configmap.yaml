apiVersion: v1
data:
  rhoai-scale.sh: |-
    #!/bin/bash

    scale() {
        local component="$1"
        echo "ðŸ’¥ Scale RHOAI ${component}..."
        local i=0
        oc -n redhat-ods-applications scale deployment ${component} --replicas=1
        until [ "$?" == 0 ]
        do
            echo -e "Waiting for 0 rc from oc commands."
            ((i=i+1))
            if [ $i -gt 30 ]; then
                echo -e "ðŸ•±Failed - to scale ${component} ?"
                exit 1
            fi
            sleep 10
            oc -n redhat-ods-applications scale deployment ${component} --replicas=1
        done
        echo "ðŸ’¥ Scale RHOAI ${component} Done"
    }
    scale rhods-dashboard
    scale modelmesh-controller

    echo -e "\nðŸŒ»Scale RHOAI components OK.${NC}ðŸŒ»\n"
    exit 0
kind: ConfigMap
metadata:
  name: rhoai-scale
  namespace: openshift-config
